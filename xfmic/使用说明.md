我已经为您创建了一个完整的可执行程序来读取RK3328降噪板的声源定位信息。

  已创建的文件：

  1. rk3328_doa_reader.c - 主程序源码
  2. Makefile - 编译脚本
  3. README.md - 详细使用说明

  快速上手：

  1. 编译程序

  cd /Users/yushuangyang/workspace/xiaoyu-robot/xfmic
  make

  2. 运行程序

  # 基本用法 (需要sudo权限访问串口)
  sudo ./rk3328_doa_reader /dev/ttyUSB0

  # 或者先设置权限
  sudo usermod -a -G dialout $USER
  # 重新登录后可以直接运行
  ./rk3328_doa_reader /dev/ttyUSB0

  3. 高级功能

  # 手动唤醒正前方波束(0°)
  ./rk3328_doa_reader /dev/ttyUSB0 -m 0

  # 获取设备版本
  ./rk3328_doa_reader /dev/ttyUSB0 -v

  # 查看帮助
  ./rk3328_doa_reader -h

  主要功能：

  - ✅ 实时声源定位: 显示0°-300°全方向角度信息
  - ✅ 波束识别: 自动识别6个波束方向
  - ✅ 多线程处理: 保证数据实时性
  - ✅ JSON解析: 解析设备返回的定位数据
  - ✅ 手动控制: 可以指定特定波束方向

  输出示例：

  ========================================
  [2024-11-15 14:30:25] 检测到声源!
  波束编号: 1
  方向角度: 60°
  方向描述: 右前方
  唤醒词: xiao3 wei1 xiao3 wei1
  ========================================

  程序会实时监听串口数据，当检测到声源时立即显示详细的定位信息。按Ctrl+C可以优雅退出
  程序。
